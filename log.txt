2017-08-04 11:37:02,812 - ERROR - main.py - crawl_key_word - 177 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 172, in crawl_key_word
    page_count = page2(content, key_word, url, seg_list)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 211, in page2
    sale = allsales[j]
IndexError: list index out of range

2017-08-22 17:19:08,910 - ERROR - main.py - crawl_key_word - 208 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 203, in crawl_key_word
    page_count = page2(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 241, in page2
    sale = allsales[j]
IndexError: list index out of range

2017-08-23 14:31:00,250 - ERROR - main.py - crawl_key_word_vip - 330 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 325, in crawl_key_word_vip
    page_count = page2_vip(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 354, in page2_vip
    price = product['sell_price_min_tips']
KeyError: 'sell_price_min_tips'

2017-08-23 14:32:23,871 - ERROR - main.py - crawl_key_word_vip - 330 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 325, in crawl_key_word_vip
    page_count = page2_vip(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 390, in page2_vip
    unit_price = float(price) / int(num)
TypeError: float() argument must be a string or a number

2017-08-23 14:33:37,648 - ERROR - main.py - crawl_key_word_vip - 330 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 325, in crawl_key_word_vip
    page_count = page2_vip(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 391, in page2_vip
    unit_price = float(price) / int(num)
TypeError: float() argument must be a string or a number

2017-08-23 17:08:55,841 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 29L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:08:55,842 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 29L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:08:55,844 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 29L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:08:55,848 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 29L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:08:55,851 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 29L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:08:55,855 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 29L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:08:55,857 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 29L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:08:55,861 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 29L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:08:55,864 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 29L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:08:55,868 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 29L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:10:36,062 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 30L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:10:36,062 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 30L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:10:36,065 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 30L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:10:36,065 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 30L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:10:36,072 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 30L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:10:36,073 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 30L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:10:36,075 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 30L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:10:36,078 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 30L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:10:36,079 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 30L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:10:36,081 - ERROR - main.py - crawl_key_word_vip - 332 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 319, in crawl_key_word_vip
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.OperationalError) (1366, "Incorrect integer value: '' for column 'sales' at row 1") [SQL: u'INSERT INTO product (key_word, product_id, product_name, address, spec, package_num, unit, price, unit_price, sales, url, nick, product_file_id, origin) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a', 263730057, '\xe3\x80\x90\xe8\xb0\x83\xe8\x8a\x82\xe5\x86\x85\xe5\x88\x86\xe6\xb3\x8c\xe3\x80\x91\xe5\x81\xa5\xe5\xae\x89\xe5\x96\x9cGNC \xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a1300mg180\xe7\xb2\x92', '\xe7\xbe\x8e\xe5\x9b\xbdGNC\xe8\x86\xb3\xe9\xa3\x9f\xe8\x90\xa5\xe5\x85\xbb\xe4\xb8\x93\xe5\x9c\xba', None, 1, None, '208', 208.0, '', 'http://category.vip.com/suggest.php?keyword=\xe6\x9c\x88\xe8\xa7\x81\xe8\x8d\x89\xe6\xb2\xb9\xe8\xbd\xaf\xe8\x83\xb6\xe5\x9b\x8a&page=1&count=100', 'GNC', 30L, '\xe5\x94\xaf\xe5\x93\x81\xe4\xbc\x9a')]

2017-08-23 17:16:21,375 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:22,230 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:22,983 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:23,631 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:24,451 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:25,690 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:26,368 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:29,997 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:30,686 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:31,345 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:46,145 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:46,805 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:47,496 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:48,148 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:48,989 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:49,648 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:50,355 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:51,332 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:52,015 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:16:52,706 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 423, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:18:36,220 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 425, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:18:36,858 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 425, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:18:37,599 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 425, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:18:38,240 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 425, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:21:55,845 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 425, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:21:56,522 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 425, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:21:57,158 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 425, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:21:57,816 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 425, in page2_jd
    if not store.get('seller'):
AttributeError: 'unicode' object has no attribute 'get'

2017-08-23 17:23:30,815 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 426, in page2_jd
    store = json.loads(store)
  File "D:\Python27\lib\json\__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "D:\Python27\lib\json\decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "D:\Python27\lib\json\decoder.py", line 382, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded

2017-08-23 17:23:31,451 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 426, in page2_jd
    store = json.loads(store)
  File "D:\Python27\lib\json\__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "D:\Python27\lib\json\decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "D:\Python27\lib\json\decoder.py", line 382, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded

2017-08-23 17:23:32,072 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 426, in page2_jd
    store = json.loads(store)
  File "D:\Python27\lib\json\__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "D:\Python27\lib\json\decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "D:\Python27\lib\json\decoder.py", line 382, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded

2017-08-23 17:23:32,720 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 426, in page2_jd
    store = json.loads(store)
  File "D:\Python27\lib\json\__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "D:\Python27\lib\json\decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "D:\Python27\lib\json\decoder.py", line 382, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded

2017-08-23 17:23:33,345 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 426, in page2_jd
    store = json.loads(store)
  File "D:\Python27\lib\json\__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "D:\Python27\lib\json\decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "D:\Python27\lib\json\decoder.py", line 382, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded

2017-08-23 17:23:33,994 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 426, in page2_jd
    store = json.loads(store)
  File "D:\Python27\lib\json\__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "D:\Python27\lib\json\decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "D:\Python27\lib\json\decoder.py", line 382, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded

2017-08-23 17:26:02,556 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 393, in crawl_key_word_jd
    page_count = page2_jd(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 416, in page2_jd
    r2 = requests.get('https://chat1.jd.com/api/checkChat?pidList=' + pidList)
  File "D:\Python27\lib\site-packages\requests\api.py", line 72, in get
    return request('get', url, params=params, **kwargs)
  File "D:\Python27\lib\site-packages\requests\api.py", line 58, in request
    return session.request(method=method, url=url, **kwargs)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 502, in request
    resp = self.send(prep, **send_kwargs)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 612, in send
    r = adapter.send(request, **kwargs)
  File "D:\Python27\lib\site-packages\requests\adapters.py", line 490, in send
    raise ConnectionError(err, request=request)
ConnectionError: ('Connection aborted.', BadStatusLine("''",))

2017-08-23 17:26:23,585 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 391, in crawl_key_word_jd
    content = requests.get(url, headers=headers)
  File "D:\Python27\lib\site-packages\requests\api.py", line 72, in get
    return request('get', url, params=params, **kwargs)
  File "D:\Python27\lib\site-packages\requests\api.py", line 58, in request
    return session.request(method=method, url=url, **kwargs)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 502, in request
    resp = self.send(prep, **send_kwargs)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 612, in send
    r = adapter.send(request, **kwargs)
  File "D:\Python27\lib\site-packages\requests\adapters.py", line 504, in send
    raise ConnectionError(e, request=request)
ConnectionError: HTTPSConnectionPool(host='search.jd.com', port=443): Max retries exceeded with url: /Search?keyword=Vitamore%E6%9C%88%E8%A7%81%E8%8D%89%E6%B2%B9%E8%BD%AF%E8%83%B6%E5%9B%8A&enc=utf-8&page=16 (Caused by NewConnectionError('<urllib3.connection.VerifiedHTTPSConnection object at 0x07AE7110>: Failed to establish a new connection: [Errno 10060] ',))

2017-08-23 17:26:44,598 - ERROR - main.py - crawl_key_word_jd - 398 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 391, in crawl_key_word_jd
    content = requests.get(url, headers=headers)
  File "D:\Python27\lib\site-packages\requests\api.py", line 72, in get
    return request('get', url, params=params, **kwargs)
  File "D:\Python27\lib\site-packages\requests\api.py", line 58, in request
    return session.request(method=method, url=url, **kwargs)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 502, in request
    resp = self.send(prep, **send_kwargs)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 612, in send
    r = adapter.send(request, **kwargs)
  File "D:\Python27\lib\site-packages\requests\adapters.py", line 504, in send
    raise ConnectionError(e, request=request)
ConnectionError: HTTPSConnectionPool(host='search.jd.com', port=443): Max retries exceeded with url: /Search?keyword=Vitamore%E6%9C%88%E8%A7%81%E8%8D%89%E6%B2%B9%E8%BD%AF%E8%83%B6%E5%9B%8A&enc=utf-8&page=18 (Caused by NewConnectionError('<urllib3.connection.VerifiedHTTPSConnection object at 0x07AE7470>: Failed to establish a new connection: [Errno 10060] ',))

2017-08-23 17:32:22,102 - ERROR - main.py - crawl_key_word - 260 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 255, in crawl_key_word
    page_count = page2(content, key_word, url, list(seg_list), product_file_id)
  File "D:\project\p_flask\taobao3\taobao3\controllers\main.py", line 292, in page2
    sale = allsales[j]
IndexError: list index out of range

2017-09-05 16:40:43,226 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 207, in crawl_key_word
    content = requests.get(url, headers=headers)
  File "D:\Python27\lib\site-packages\requests\api.py", line 72, in get
    return request('get', url, params=params, **kwargs)
  File "D:\Python27\lib\site-packages\requests\api.py", line 58, in request
    return session.request(method=method, url=url, **kwargs)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 488, in request
    prep = self.prepare_request(req)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 431, in prepare_request
    hooks=merge_hooks(request.hooks, self.hooks),
  File "D:\Python27\lib\site-packages\requests\models.py", line 305, in prepare
    self.prepare_url(url, params)
  File "D:\Python27\lib\site-packages\requests\models.py", line 379, in prepare_url
    raise MissingSchema(error)
MissingSchema: Invalid URL '': No schema supplied. Perhaps you meant http://?

2017-09-05 16:40:44,075 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 209, in crawl_key_word
    page_count = page2(content, url, product_file_id)
TypeError: page2() takes exactly 5 arguments (3 given)

2017-09-05 16:40:44,805 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 209, in crawl_key_word
    page_count = page2(content, url, product_file_id)
TypeError: page2() takes exactly 5 arguments (3 given)

2017-09-05 16:40:45,302 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 209, in crawl_key_word
    page_count = page2(content, url, product_file_id)
TypeError: page2() takes exactly 5 arguments (3 given)

2017-09-05 16:40:45,796 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 209, in crawl_key_word
    page_count = page2(content, url, product_file_id)
TypeError: page2() takes exactly 5 arguments (3 given)

2017-09-05 16:40:46,540 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 209, in crawl_key_word
    page_count = page2(content, url, product_file_id)
TypeError: page2() takes exactly 5 arguments (3 given)

2017-09-05 16:40:47,063 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 209, in crawl_key_word
    page_count = page2(content, url, product_file_id)
TypeError: page2() takes exactly 5 arguments (3 given)

2017-09-05 16:40:47,769 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 209, in crawl_key_word
    page_count = page2(content, url, product_file_id)
TypeError: page2() takes exactly 5 arguments (3 given)

2017-09-05 16:40:48,348 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 209, in crawl_key_word
    page_count = page2(content, url, product_file_id)
TypeError: page2() takes exactly 5 arguments (3 given)

2017-09-05 16:40:48,953 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 209, in crawl_key_word
    page_count = page2(content, url, product_file_id)
TypeError: page2() takes exactly 5 arguments (3 given)

2017-09-05 16:40:49,496 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 209, in crawl_key_word
    page_count = page2(content, url, product_file_id)
TypeError: page2() takes exactly 5 arguments (3 given)

2017-09-05 16:40:50,151 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 209, in crawl_key_word
    page_count = page2(content, url, product_file_id)
TypeError: page2() takes exactly 5 arguments (3 given)

2017-09-05 16:41:36,427 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 207, in crawl_key_word
    content = requests.get(url, headers=headers)
  File "D:\Python27\lib\site-packages\requests\api.py", line 72, in get
    return request('get', url, params=params, **kwargs)
  File "D:\Python27\lib\site-packages\requests\api.py", line 58, in request
    return session.request(method=method, url=url, **kwargs)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 488, in request
    prep = self.prepare_request(req)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 431, in prepare_request
    hooks=merge_hooks(request.hooks, self.hooks),
  File "D:\Python27\lib\site-packages\requests\models.py", line 305, in prepare
    self.prepare_url(url, params)
  File "D:\Python27\lib\site-packages\requests\models.py", line 379, in prepare_url
    raise MissingSchema(error)
MissingSchema: Invalid URL '': No schema supplied. Perhaps you meant http://?

2017-09-05 16:42:37,201 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 207, in crawl_key_word
    content = requests.get(url, headers=headers)
  File "D:\Python27\lib\site-packages\requests\api.py", line 72, in get
    return request('get', url, params=params, **kwargs)
  File "D:\Python27\lib\site-packages\requests\api.py", line 58, in request
    return session.request(method=method, url=url, **kwargs)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 488, in request
    prep = self.prepare_request(req)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 431, in prepare_request
    hooks=merge_hooks(request.hooks, self.hooks),
  File "D:\Python27\lib\site-packages\requests\models.py", line 305, in prepare
    self.prepare_url(url, params)
  File "D:\Python27\lib\site-packages\requests\models.py", line 379, in prepare_url
    raise MissingSchema(error)
MissingSchema: Invalid URL '': No schema supplied. Perhaps you meant http://?

2017-09-05 16:42:42,635 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,638 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,648 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,650 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,651 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,654 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,657 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,657 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,665 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,667 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,670 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,671 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,674 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,676 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,684 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,686 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,687 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,690 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,723 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,724 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,726 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,730 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,733 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,734 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,740 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,742 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,743 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,746 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,750 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,750 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,755 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,756 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,759 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,762 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,763 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,766 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,766 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,772 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,773 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,779 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,779 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,785 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,786 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,792 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,793 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,799 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,801 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,805 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,805 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,811 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,812 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,818 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,819 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,823 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,828 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,835 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,835 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,838 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,851 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,852 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,855 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,857 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,861 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,864 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,877 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,878 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,881 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,884 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,885 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,888 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,891 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,891 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,900 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,901 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,904 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,907 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,908 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,911 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,913 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,917 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,918 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,924 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,934 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,937 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,938 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,941 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,943 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,944 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,947 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,950 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,950 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,953 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,954 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,956 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,957 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:42:42,973 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe3\x80\x90\xe7\x9b\xb4\xe8\x90\xa5\xe3\x80\x91\xe6\x84\x8f\xe5\xa4\xa7\xe5\x88\xa9\xe8\xbf\x9b\xe5\x8f\xa3 MARVIS \xe7\x8e\x9b\xe5\xb0\x94\xe6\x96\ ... (1 characters truncated) ... af\xe8\x96\x84\xe8\x8d\xb7\xe7\x89\x99\xe8\x86\x8f3\xe6\x94\xaf \xe9\x99\xa4\xe5\x8f\xa3\xe8\x87\xad\xe7\xbe\x8e\xe7\x99\xbd \xe5\x8c\x85\xe9\x82\xae', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 3L)]

2017-09-05 16:51:39,517 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 207, in crawl_key_word
    content = requests.get(url, headers=headers)
  File "D:\Python27\lib\site-packages\requests\api.py", line 72, in get
    return request('get', url, params=params, **kwargs)
  File "D:\Python27\lib\site-packages\requests\api.py", line 58, in request
    return session.request(method=method, url=url, **kwargs)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 488, in request
    prep = self.prepare_request(req)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 431, in prepare_request
    hooks=merge_hooks(request.hooks, self.hooks),
  File "D:\Python27\lib\site-packages\requests\models.py", line 305, in prepare
    self.prepare_url(url, params)
  File "D:\Python27\lib\site-packages\requests\models.py", line 379, in prepare_url
    raise MissingSchema(error)
MissingSchema: Invalid URL '': No schema supplied. Perhaps you meant http://?

2017-09-05 16:51:44,457 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,459 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,460 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,461 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,467 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,467 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,473 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,474 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,479 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,480 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,484 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,486 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,490 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,493 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,496 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,499 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,500 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,502 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,503 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,507 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,509 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,513 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,515 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,520 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,523 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,525 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,526 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,528 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,532 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,533 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,539 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,540 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,562 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,565 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,568 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,569 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,572 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,573 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,575 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,578 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,579 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,582 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,584 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,585 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,588 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,589 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,595 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,596 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,598 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,601 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,602 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,605 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,608 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,611 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,612 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,614 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,618 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,621 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,625 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,627 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,631 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,631 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,637 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,638 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,642 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,644 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,645 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,651 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,654 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,654 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,657 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,658 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,690 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,694 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,694 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,697 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,698 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,700 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,703 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,704 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,707 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,713 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,716 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,717 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,723 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,726 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,729 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,743 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,744 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,750 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,752 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,756 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,757 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,760 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,763 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 16:51:44,763 - ERROR - main.py - crawl_key_word - 212 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 205, in crawl_key_word
    products = Product.query.filter_by(url=url, product_file_id=product_file_id).all()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2703, in all
    return list(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2855, in __iter__
    return self._execute_and_instances(context)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2876, in _execute_and_instances
    close_with_result=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2885, in _get_bind_args
    **kw
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\query.py", line 2867, in _connection_from_session
    conn = self.session.connection(**kw)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 998, in connection
    execution_options=execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 1003, in _connection_for_bind
    engine, execution_options)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 382, in _connection_for_bind
    self._assert_active()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 276, in _assert_active
    % self._rollback_exception
InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('539089140213', '213203', '\xe6\xb5\xb7\xe5\xa4\x96\xe5\x95\x86\xe5\x93\x81', '99.00', '\xe6\xb5\x99\xe6\xb1\x9f \xe6\x9d\xad\xe5\xb7\x9e', '7830\xe4\xba\xba\xe6\x94\xb6\xe8\xb4\xa7', None, 'https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44https://s.taobao.com/search?globalbuy=1&filter_tianmao=tmall&sort=sale-desc&s=44', 4L)]

2017-09-05 17:19:18,641 - ERROR - main.py - crawl_key_word - 211 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 208, in crawl_key_word
    page_count = page2(content, url, product_file_id)
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 226, in page2
    products = json.loads(products[0])
  File "D:\Python27\lib\json\__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "D:\Python27\lib\json\decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "D:\Python27\lib\json\decoder.py", line 380, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Expecting object: line 1 column 1960 (char 1959)

2017-09-05 17:19:19,141 - ERROR - main.py - crawl_key_word - 211 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 208, in crawl_key_word
    page_count = page2(content, url, product_file_id)
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 226, in page2
    products = json.loads(products[0])
  File "D:\Python27\lib\json\__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "D:\Python27\lib\json\decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "D:\Python27\lib\json\decoder.py", line 380, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Expecting object: line 1 column 1832 (char 1831)

2017-09-05 17:19:20,048 - ERROR - main.py - crawl_key_word - 211 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 208, in crawl_key_word
    page_count = page2(content, url, product_file_id)
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 226, in page2
    products = json.loads(products[0])
  File "D:\Python27\lib\json\__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "D:\Python27\lib\json\decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "D:\Python27\lib\json\decoder.py", line 380, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Expecting object: line 1 column 1748 (char 1747)

2017-09-05 17:19:20,578 - ERROR - main.py - crawl_key_word - 211 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 208, in crawl_key_word
    page_count = page2(content, url, product_file_id)
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 226, in page2
    products = json.loads(products[0])
  File "D:\Python27\lib\json\__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "D:\Python27\lib\json\decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "D:\Python27\lib\json\decoder.py", line 380, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Expecting object: line 1 column 3269 (char 3268)

2017-09-05 17:19:21,153 - ERROR - main.py - crawl_key_word - 211 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 208, in crawl_key_word
    page_count = page2(content, url, product_file_id)
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\main.py", line 226, in page2
    products = json.loads(products[0])
  File "D:\Python27\lib\json\__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "D:\Python27\lib\json\decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "D:\Python27\lib\json\decoder.py", line 380, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Expecting object: line 1 column 9203 (char 9202)

2017-09-13 11:39:30,803 - ERROR - tmcs.py - crawl_key_word - 54 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\tmcs.py", line 51, in crawl_key_word
    page2(content, url, product_file_id)
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\tmcs.py", line 73, in page2
    save_product(nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id)
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\tools.py", line 41, in save_product
    db.session.commit()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\scoping.py", line 157, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 906, in commit
    self.transaction.commit()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 461, in commit
    self._prepare_impl()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 441, in _prepare_impl
    self.session.flush()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 2171, in flush
    self._flush(objects)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 2291, in _flush
    transaction.rollback(_capture_exception=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\util\langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 2255, in _flush
    flush_context.execute()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 389, in execute
    rec.execute(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 548, in execute
    uow
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\persistence.py", line 835, in _emit_insert_statements
    execute(statement, params)
  File "D:\Python27\lib\site-packages\sqlalchemy\engine\base.py", line 945, in execute
    return meth(self, multiparams, params)
  File "D:\Python27\lib\site-packages\sqlalchemy\sql\elements.py", line 263, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "D:\Python27\lib\site-packages\sqlalchemy\engine\base.py", line 1053, in _execute_clauseelement
    compiled_sql, distilled_params
  File "D:\Python27\lib\site-packages\sqlalchemy\engine\base.py", line 1189, in _execute_context
    context)
  File "D:\Python27\lib\site-packages\sqlalchemy\engine\base.py", line 1402, in _handle_dbapi_exception
    exc_info
  File "D:\Python27\lib\site-packages\sqlalchemy\util\compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "D:\Python27\lib\site-packages\sqlalchemy\engine\base.py", line 1182, in _execute_context
    context)
  File "D:\Python27\lib\site-packages\sqlalchemy\engine\default.py", line 470, in do_execute
    cursor.execute(statement, parameters)
  File "D:\Python27\lib\site-packages\MySQLdb\cursors.py", line 205, in execute
    self.errorhandler(self, exc, value)
  File "D:\Python27\lib\site-packages\MySQLdb\connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
DataError: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('525723653489', None, '\n  \xe3\x80\x90\xe5\xa4\xa9\xe7\x8c\xab\xe8\xb6\x85\xe5\xb8\x82\xe3\x80\x91\xe9\x87\x91\xe6\xb2\x99\xe6\xb2\xb3\xe9\xb8\xa1\xe8\x9b\x8b \xe6\x8c\x82\xe9\x9d\xa2\xe9\x9d\xa2\xe6\x9d\xa1150G\xe7\x82\x92\xe9\x9d\xa2 \xe5\x87\x89\xe9\x9d\xa2\xe6\x8b\x8c\xe9\x9d\xa21-2\xe4\xba\xba\xe4\xbb\xbd\n', '1.00', None, '\xe5\x91\xa8\xe9\x94\x80\xe9\x87\x8f:108245', None, 'https://list.tmall.com/search_product.htm?spm=a3204.7933263.0.0.e859a79ubxfk&cat=50514008&s=0&q=\xe5\xa4\xa9\xe7\x8c\xab\xe8\xb6\x85\xe5\xb8\x82&sort=wd&style=g&user_id=725677994&from=chaoshi.index.pc_1_placeholder&active=1&industryCatId=50514008&smAreaId=500100#J_Filter', 17L)]

2017-09-13 11:43:56,209 - ERROR - tmcs.py - crawl_key_word - 54 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\tmcs.py", line 51, in crawl_key_word
    page2(content, url, product_file_id)
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\tmcs.py", line 74, in page2
    save_product(nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id)
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\tools.py", line 41, in save_product
    db.session.commit()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\scoping.py", line 157, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 906, in commit
    self.transaction.commit()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 461, in commit
    self._prepare_impl()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 441, in _prepare_impl
    self.session.flush()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 2171, in flush
    self._flush(objects)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 2291, in _flush
    transaction.rollback(_capture_exception=True)
  File "D:\Python27\lib\site-packages\sqlalchemy\util\langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\session.py", line 2255, in _flush
    flush_context.execute()
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 389, in execute
    rec.execute(self)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\unitofwork.py", line 548, in execute
    uow
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "D:\Python27\lib\site-packages\sqlalchemy\orm\persistence.py", line 835, in _emit_insert_statements
    execute(statement, params)
  File "D:\Python27\lib\site-packages\sqlalchemy\engine\base.py", line 945, in execute
    return meth(self, multiparams, params)
  File "D:\Python27\lib\site-packages\sqlalchemy\sql\elements.py", line 263, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "D:\Python27\lib\site-packages\sqlalchemy\engine\base.py", line 1053, in _execute_clauseelement
    compiled_sql, distilled_params
  File "D:\Python27\lib\site-packages\sqlalchemy\engine\base.py", line 1189, in _execute_context
    context)
  File "D:\Python27\lib\site-packages\sqlalchemy\engine\base.py", line 1402, in _handle_dbapi_exception
    exc_info
  File "D:\Python27\lib\site-packages\sqlalchemy\util\compat.py", line 203, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "D:\Python27\lib\site-packages\sqlalchemy\engine\base.py", line 1182, in _execute_context
    context)
  File "D:\Python27\lib\site-packages\sqlalchemy\engine\default.py", line 470, in do_execute
    cursor.execute(statement, parameters)
  File "D:\Python27\lib\site-packages\MySQLdb\cursors.py", line 205, in execute
    self.errorhandler(self, exc, value)
  File "D:\Python27\lib\site-packages\MySQLdb\connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
DataError: (_mysql_exceptions.DataError) (1406, "Data too long for column 'url' at row 1") [SQL: u'INSERT INTO product (nid, category, title, view_price, item_loc, view_sales, nick, url, product_file_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'] [parameters: ('525723653489', None, '\n  \xe3\x80\x90\xe5\xa4\xa9\xe7\x8c\xab\xe8\xb6\x85\xe5\xb8\x82\xe3\x80\x91\xe9\x87\x91\xe6\xb2\x99\xe6\xb2\xb3\xe9\xb8\xa1\xe8\x9b\x8b \xe6\x8c\x82\xe9\x9d\xa2\xe9\x9d\xa2\xe6\x9d\xa1150G\xe7\x82\x92\xe9\x9d\xa2 \xe5\x87\x89\xe9\x9d\xa2\xe6\x8b\x8c\xe9\x9d\xa21-2\xe4\xba\xba\xe4\xbb\xbd\n', '1.00', None, '\xe5\x91\xa8\xe9\x94\x80\xe9\x87\x8f:108245', None, 'https://list.tmall.com/search_product.htm?spm=a3204.7933263.0.0.e859a79ubxfk&cat=50514008&s=0&q=\xe5\xa4\xa9\xe7\x8c\xab\xe8\xb6\x85\xe5\xb8\x82&sort=wd&style=g&user_id=725677994&from=chaoshi.index.pc_1_placeholder&active=1&industryCatId=50514008&smAreaId=500100#J_Filter', 18L)]

2017-09-13 12:33:27,594 - ERROR - tmcs.py - crawl_key_word - 55 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\tmcs.py", line 49, in crawl_key_word
    content = requests.get(url, headers=headers)
  File "D:\Python27\lib\site-packages\requests\api.py", line 72, in get
    return request('get', url, params=params, **kwargs)
  File "D:\Python27\lib\site-packages\requests\api.py", line 58, in request
    return session.request(method=method, url=url, **kwargs)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 502, in request
    resp = self.send(prep, **send_kwargs)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 612, in send
    r = adapter.send(request, **kwargs)
  File "D:\Python27\lib\site-packages\requests\adapters.py", line 504, in send
    raise ConnectionError(e, request=request)
ConnectionError: HTTPSConnectionPool(host='list.tmall.com', port=443): Max retries exceeded with url: /search_product.htm?spm=a3204.7933263.0.0.e859a79ubxfk&cat=50514008&s=0&q=%E5%A4%A9%E7%8C%AB%E8%B6%85%E5%B8%82&sort=wd&style=g&user_id=725677994&from=chaoshi.index.pc_1_placeholder&active=1&industryCatId=50514008&smAreaId=500100 (Caused by NewConnectionError('<urllib3.connection.VerifiedHTTPSConnection object at 0x05070770>: Failed to establish a new connection: [Errno 11004] getaddrinfo failed',))

2017-09-13 12:33:41,851 - ERROR - tmcs.py - crawl_key_word - 55 - Traceback (most recent call last):
  File "D:\project\p_flask\taobao_test\taobao_test\controllers\tmcs.py", line 49, in crawl_key_word
    content = requests.get(url, headers=headers)
  File "D:\Python27\lib\site-packages\requests\api.py", line 72, in get
    return request('get', url, params=params, **kwargs)
  File "D:\Python27\lib\site-packages\requests\api.py", line 58, in request
    return session.request(method=method, url=url, **kwargs)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 502, in request
    resp = self.send(prep, **send_kwargs)
  File "D:\Python27\lib\site-packages\requests\sessions.py", line 612, in send
    r = adapter.send(request, **kwargs)
  File "D:\Python27\lib\site-packages\requests\adapters.py", line 504, in send
    raise ConnectionError(e, request=request)
ConnectionError: HTTPSConnectionPool(host='list.tmall.com', port=443): Max retries exceeded with url: /search_product.htm?spm=a3204.7933263.0.0.e859a79ubxfk&cat=50514008&s=40&q=%E5%A4%A9%E7%8C%AB%E8%B6%85%E5%B8%82&sort=wd&style=g&user_id=725677994&from=chaoshi.index.pc_1_placeholder&active=1&industryCatId=50514008&smAreaId=500100 (Caused by NewConnectionError('<urllib3.connection.VerifiedHTTPSConnection object at 0x05070DD0>: Failed to establish a new connection: [Errno 11004] getaddrinfo failed',))

